{"version":3,"sources":["../../../../src/components/Alert/Alert.js"],"names":["React","Component","PropTypes","Tappable","PopoutWrapper","getClassName","classNames","transitionEvents","IS_PLATFORM_ANDROID","baseClassNames","Alert","createRef","item","action","autoclose","setState","closing","waitTransitionFinish","props","onClose","e","stopPropagation","eventHandler","supported","eventName","prefix","element","current","removeEventListener","addEventListener","setTimeout","bind","actions","actionsLayout","children","className","style","restProps","state","map","button","i","onItemClick","__html","title","object","string","node","oneOf","arrayOf","shape","func","isRequired"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tappable from '../Tappable/Tappable';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport transitionEvents from '../../lib/transitionEvents';\nimport { IS_PLATFORM_ANDROID } from '../../lib/platform';\n\nconst baseClassNames = getClassName('Alert');\n\nexport default class Alert extends Component {\n  state = {};\n  element = React.createRef();\n\n  static propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    children: PropTypes.node,\n    actionsLayout: PropTypes.oneOf(['vertical', 'horizontal']),\n    actions: PropTypes.arrayOf(PropTypes.shape({\n      title: PropTypes.string,\n      action: PropTypes.func,\n      /**\n       * 'cancel' - iOS only\n       */\n      style: PropTypes.oneOf(['cancel', 'destructive', 'default'])\n    })),\n    onClose: PropTypes.func.isRequired\n  };\n\n  static defaultProps = {\n    actionsLayout: 'horizontal',\n    actions: []\n  };\n\n  onItemClick = item => () => {\n    const { action, autoclose } = item;\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish(() => {\n        autoclose && this.props.onClose();\n        action && action();\n      });\n    } else {\n      action && action();\n    }\n  };\n\n  onClose = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish(() => {\n      this.props.onClose();\n    });\n  };\n\n  stopPropagation = e => e.stopPropagation();\n\n  waitTransitionFinish (eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n\n      this.element.current.removeEventListener(eventName, eventHandler);\n      this.element.current.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), IS_PLATFORM_ANDROID ? 200 : 300);\n    }\n  }\n\n  render () {\n    const { actions, actionsLayout, children, className, style, ...restProps } = this.props;\n    const { closing } = this.state;\n\n    return (\n      <PopoutWrapper\n        className={className}\n        closing={closing}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div {...restProps} ref={this.element} onClick={this.stopPropagation} className={classNames(baseClassNames, {\n          'Alert--v': actionsLayout === 'vertical',\n          'Alert--h': actionsLayout === 'horizontal',\n          'Alert--closing': closing\n        })}>\n          <div className=\"Alert__content\">{children}</div>\n          <footer className=\"Alert__footer\">\n            {actions.map((button, i) => (\n              <Tappable\n                component=\"button\"\n                className={classNames('Alert__btn', { [`Alert__btn--${button.style}`]: button.style })}\n                onClick={this.onItemClick(button)}\n                key={`alert-action-${i}`}\n              >\n                <span dangerouslySetInnerHTML={{ __html: button.title }} />\n              </Tappable>\n            ))}\n          </footer>\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n"],"file":"Alert.js"}