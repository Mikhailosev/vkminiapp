{"version":3,"sources":["../../../../src/components/FixedLayout/FixedLayout.js"],"names":["React","getClassName","PropTypes","classNames","transitionEndEventName","transitionStartEventName","tabbarHeight","withInsets","isNumeric","baseClassNames","FixedLayout","position","top","e","panelScroll","detail","scrolls","context","panel","setState","el","offsetTop","element","getRootRef","props","current","document","addEventListener","onViewTransitionStart","onViewTransitionEnd","removeEventListener","className","children","style","vertical","insets","restProps","tabbarPadding","hasTabbar","paddingBottom","bottom","getRef","state","Component","node","object","string","oneOfType","func","shape","any","oneOf","bool"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,sBAAT,EAAiCC,wBAAjC,QAAiE,cAAjE;AACA,SAASC,YAAT,QAA6B,4BAA7B;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,IAAMC,cAAc,GAAGR,YAAY,CAAC,aAAD,CAAnC;;IAEMS,W;;;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,QAAQ,EAAE,IADJ;AAENC,MAAAA,GAAG,EAAE;AAFC,K;;4EAwCgB,UAACC,CAAD,EAAO;AAC7B,UAAIC,WAAW,GAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiB,MAAKC,OAAL,CAAaC,KAA9B,KAAwC,CAA1D;;AACA,YAAKC,QAAL,CAAc;AACZR,QAAAA,QAAQ,EAAE,UADE;AAEZC,QAAAA,GAAG,EAAE,MAAKQ,EAAL,CAAQC,SAAR,GAAoBP;AAFb,OAAd;AAID,K;;0EAEqB,YAAM;AAC1B,YAAKK,QAAL,CAAc;AACZR,QAAAA,QAAQ,EAAE,IADE;AAEZC,QAAAA,GAAG,EAAE;AAFO,OAAd;AAID,K;;6DAEQ,UAACU,OAAD,EAAa;AACpB,YAAKF,EAAL,GAAUE,OAAV;AAEA,UAAMC,UAAU,GAAG,MAAKC,KAAL,CAAWD,UAA9B;;AACA,UAAIA,UAAJ,EAAgB;AACd,YAAI,OAAOA,UAAP,KAAsB,UAA1B,EAAsC;AACpCA,UAAAA,UAAU,CAACD,OAAD,CAAV;AACD,SAFD,MAEO;AACLC,UAAAA,UAAU,CAACE,OAAX,GAAqBH,OAArB;AACD;AACF;AACF,K;;;;;;;wCApCoB;AACnB,WAAKI,QAAL,CAAcC,gBAAd,CAA+BtB,wBAA/B,EAAyD,KAAKuB,qBAA9D;AACA,WAAKF,QAAL,CAAcC,gBAAd,CAA+BvB,sBAA/B,EAAuD,KAAKyB,mBAA5D;AACD;;;2CAEuB;AACtB,WAAKH,QAAL,CAAcI,mBAAd,CAAkCzB,wBAAlC,EAA4D,KAAKuB,qBAAjE;AACA,WAAKF,QAAL,CAAcI,mBAAd,CAAkC1B,sBAAlC,EAA0D,KAAKyB,mBAA/D;AACD;;;6BA8BS;AAAA,wBAC2E,KAAKL,KADhF;AAAA,UACAO,SADA,eACAA,SADA;AAAA,UACWC,QADX,eACWA,QADX;AAAA,UACqBC,KADrB,eACqBA,KADrB;AAAA,UAC4BC,QAD5B,eAC4BA,QAD5B;AAAA,UACsCX,UADtC,eACsCA,UADtC;AAAA,UACkDY,MADlD,eACkDA,MADlD;AAAA,UAC6DC,SAD7D;;AAER,UAAMC,aAAa,GAAG,KAAKpB,OAAL,CAAaqB,SAAb,GAAyBhC,YAAzB,GAAwC,CAA9D;AACA,UAAMiC,aAAa,GAAGL,QAAQ,KAAK,QAAb,IAAyB1B,SAAS,CAAC2B,MAAM,CAACK,MAAR,CAAlC,GAAoDL,MAAM,CAACK,MAAP,GAAgBH,aAApE,GAAoF,IAA1G;AAEA,aACE,wCACMD,SADN;AAEE,QAAA,GAAG,EAAE,KAAKK,MAFZ;AAGE,QAAA,SAAS,EAAEtC,UAAU,CAACM,cAAD,6CAAoCyB,QAApC,GAAiDA,QAAjD,GAA6DH,SAA7D,CAHvB;AAIE,QAAA,KAAK,oBAAOE,KAAP,EAAiB,KAAKS,KAAtB;AAA6BH,UAAAA,aAAa,EAAbA;AAA7B;AAJP,UAME;AAAK,QAAA,SAAS,EAAC;AAAf,SAAkCP,QAAlC,CANF,CADF;AAUD;;;wBAzDe;AACd,aAAO,KAAKf,OAAL,CAAaS,QAAb,IAAyBA,QAAhC;AACD;;;;EA7BuB1B,KAAK,CAAC2C,S;;gBAA1BjC,W,eAMe;AACjBsB,EAAAA,QAAQ,EAAE9B,SAAS,CAAC0C,IADH;AAEjBX,EAAAA,KAAK,EAAE/B,SAAS,CAAC2C,MAFA;AAGjBd,EAAAA,SAAS,EAAE7B,SAAS,CAAC4C,MAHJ;AAIjBvB,EAAAA,UAAU,EAAErB,SAAS,CAAC6C,SAAV,CAAoB,CAC9B7C,SAAS,CAAC8C,IADoB,EAE9B9C,SAAS,CAAC+C,KAAV,CAAgB;AAAExB,IAAAA,OAAO,EAAEvB,SAAS,CAACgD;AAArB,GAAhB,CAF8B,CAApB,CAJK;AAQjBhB,EAAAA,QAAQ,EAAEhC,SAAS,CAACiD,KAAV,CAAgB,CAAC,KAAD,EAAQ,QAAR,CAAhB,CARO;;AASjB;;;AAGAhB,EAAAA,MAAM,EAAEjC,SAAS,CAAC2C;AAZD,C;;gBANfnC,W,kBAqBkB;AACpBQ,EAAAA,KAAK,EAAEhB,SAAS,CAAC4C,MADG;AAEpBpB,EAAAA,QAAQ,EAAExB,SAAS,CAACgD,GAFA;AAGpBZ,EAAAA,SAAS,EAAEpC,SAAS,CAACkD;AAHD,C;;AAkExB,eAAe7C,UAAU,CAACG,WAAD,CAAzB","sourcesContent":["import React from 'react';\nimport getClassName from '../../helpers/getClassName';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport { transitionEndEventName, transitionStartEventName } from '../View/View';\nimport { tabbarHeight } from '../../appearance/constants';\nimport withInsets from '../../hoc/withInsets';\nimport { isNumeric } from '../../lib/utils';\n\nconst baseClassNames = getClassName('FixedLayout');\n\nclass FixedLayout extends React.Component {\n  state = {\n    position: null,\n    top: null\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    getRootRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ]),\n    vertical: PropTypes.oneOf(['top', 'bottom']),\n    /**\n     * @ignore\n     */\n    insets: PropTypes.object\n  };\n\n  static contextTypes = {\n    panel: PropTypes.string,\n    document: PropTypes.any,\n    hasTabbar: PropTypes.bool\n  };\n\n  get document () {\n    return this.context.document || document;\n  }\n\n  componentDidMount () {\n    this.document.addEventListener(transitionStartEventName, this.onViewTransitionStart);\n    this.document.addEventListener(transitionEndEventName, this.onViewTransitionEnd);\n  }\n\n  componentWillUnmount () {\n    this.document.removeEventListener(transitionStartEventName, this.onViewTransitionStart);\n    this.document.removeEventListener(transitionEndEventName, this.onViewTransitionEnd);\n  }\n\n  onViewTransitionStart = (e) => {\n    let panelScroll = e.detail.scrolls[this.context.panel] || 0;\n    this.setState({\n      position: 'absolute',\n      top: this.el.offsetTop + panelScroll\n    });\n  };\n\n  onViewTransitionEnd = () => {\n    this.setState({\n      position: null,\n      top: null\n    });\n  };\n\n  getRef = (element) => {\n    this.el = element;\n\n    const getRootRef = this.props.getRootRef;\n    if (getRootRef) {\n      if (typeof getRootRef === 'function') {\n        getRootRef(element);\n      } else {\n        getRootRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { className, children, style, vertical, getRootRef, insets, ...restProps } = this.props;\n    const tabbarPadding = this.context.hasTabbar ? tabbarHeight : 0;\n    const paddingBottom = vertical === 'bottom' && isNumeric(insets.bottom) ? insets.bottom + tabbarPadding : null;\n\n    return (\n      <div\n        {...restProps}\n        ref={this.getRef}\n        className={classNames(baseClassNames, { [`FixedLayout--${vertical}`]: vertical }, className)}\n        style={{ ...style, ...this.state, paddingBottom }}\n      >\n        <div className=\"FixedLayout__in\">{children}</div>\n      </div>\n    );\n  }\n}\n\nexport default withInsets(FixedLayout);\n"],"file":"FixedLayout.js"}